{% extends "base.html" %}
{% block title %}Career Matches{% endblock %}
{% block content %}
<div class="container">
  <h1>{{ user.name or 'Student' }}, here are your career matches!</h1>
  <p>Personality: <strong>{{ personality_type }}</strong></p>

  <input type="text" name="q" placeholder="Search careers or universities..." class="form-input search"
         value="{{ search_query or '' }}"
         hx-get="/matches?personality_type={{ personality_type }}"
         hx-trigger="keyup changed delay:500ms"
         hx-target="#results"
         hx-include="[name='q']">

  <div id="results" class="grid mt-4">
    {% for m in matches %}
      <div class="glass card">
        {% if m['image'] %}
          <img src="/{{ m['image'] }}" alt="{{ m['career'] }}" class="card-img">
        {% endif %}
        <h3 class="career">{{ m['career'] }}</h3>
        <p class="uni">Top Unis: {{ m['university'] }}</p>
        <p>{{ m['details'] }}</p>
        <div class="badge">Fit score: {{ m['score'] }}</div>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
